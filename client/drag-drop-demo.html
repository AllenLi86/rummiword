<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ® Rummiword æ‹–æ‹½ç³»çµ±æ¼”ç¤º</title>
  <style>
    /* åŸºç¤æ¨£å¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255,255,255,0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2);
    }

    .demo-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .demo-header h1 {
      color: #333;
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .demo-header p {
      color: #666;
      font-size: 1.1rem;
    }

    .feature-badges {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .badge {
      background: #007bff;
      color: white;
      padding: 5px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
    }

    .badge.success { background: #28a745; }
    .badge.warning { background: #ffc107; color: #333; }
    .badge.info { background: #17a2b8; }

    .demo-controls {
      text-align: center;
      margin: 30px 0;
    }

    .demo-btn {
      background: linear-gradient(145deg, #007bff, #0056b3);
      color: white;
      border: none;
      padding: 12px 24px;
      margin: 0 10px;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,123,255,0.3);
    }

    .demo-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,123,255,0.4);
    }

    .demo-btn.success {
      background: linear-gradient(145deg, #28a745, #1e7e34);
      box-shadow: 0 4px 15px rgba(40,167,69,0.3);
    }

    .demo-btn.danger {
      background: linear-gradient(145deg, #dc3545, #c82333);
      box-shadow: 0 4px 15px rgba(220,53,69,0.3);
    }

    .demo-btn.secondary {
      background: linear-gradient(145deg, #6c757d, #545b62);
      box-shadow: 0 4px 15px rgba(108,117,125,0.3);
    }

    #game-area {
      min-height: 600px;
      background: rgba(0,0,0,0.05);
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
    }

    .loading-message {
      text-align: center;
      padding: 60px 20px;
      color: #666;
      font-size: 18px;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .feature-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #007bff;
    }

    .feature-card h3 {
      color: #333;
      margin-bottom: 10px;
    }

    .feature-card p {
      color: #666;
      font-size: 14px;
    }

    .status-bar {
      background: #e9ecef;
      border-radius: 10px;
      padding: 15px;
      margin: 20px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: bold;
      color: #333;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #dc3545;
    }

    .status-indicator.active {
      background: #28a745;
    }

    @media (max-width: 768px) {
      .demo-container {
        padding: 20px;
        border-radius: 15px;
      }
      
      .demo-header h1 {
        font-size: 2rem;
      }
      
      .demo-btn {
        display: block;
        width: 100%;
        margin: 5px 0;
      }
      
      .features-grid {
        grid-template-columns: 1fr;
      }
      
      .status-bar {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <div class="demo-header">
      <h1>ğŸ® Rummiword æ‹–æ‹½ç³»çµ±æ¼”ç¤º</h1>
      <p>HTML5 æ‹–æ‹½ API + è§¸æ§æ”¯æ´çš„å­—æ¯ç£šéŠæˆ²ç•Œé¢</p>
      
      <div class="feature-badges">
        <span class="badge success">âœ… HTML5 æ‹–æ‹½</span>
        <span class="badge success">ğŸ“± è§¸æ§æ”¯æ´</span>
        <span class="badge info">ğŸ¨ éŸ¿æ‡‰å¼è¨­è¨ˆ</span>
        <span class="badge warning">ğŸ§ª æ¸¬è©¦ç‰ˆæœ¬</span>
      </div>
    </div>

    <!-- ç³»çµ±ç‹€æ…‹ -->
    <div class="status-bar">
      <div class="status-item">
        <div id="drag-status" class="status-indicator"></div>
        <span>æ‹–æ‹½ç³»çµ±</span>
      </div>
      <div class="status-item">
        <div id="board-status" class="status-indicator"></div>
        <span>æ£‹ç›¤ç³»çµ±</span>
      </div>
      <div class="status-item">
        <div id="touch-status" class="status-indicator"></div>
        <span>è§¸æ§æ”¯æ´</span>
      </div>
      <div class="status-item">
        <span id="device-type">è¨­å‚™: æª¢æ¸¬ä¸­...</span>
      </div>
    </div>

    <!-- æ§åˆ¶æŒ‰éˆ• -->
    <div class="demo-controls">
      <button class="demo-btn success" onclick="startDemoGame()">
        ğŸš€ å•Ÿå‹•æ¼”ç¤º
      </button>
      <button class="demo-btn" onclick="loadTestData()">
        ğŸ² è¼‰å…¥æ¸¬è©¦æ•¸æ“š
      </button>
      <button class="demo-btn secondary" onclick="toggleDebugMode()">
        ğŸ› ï¸ èª¿è©¦æ¨¡å¼
      </button>
      <button class="demo-btn danger" onclick="resetDemo()">
        ğŸ”„ é‡ç½®æ¼”ç¤º
      </button>
    </div>

    <!-- éŠæˆ²å€åŸŸ -->
    <div id="game-area">
      <div class="loading-message">
        <h3>ğŸ”§ æ­£åœ¨è¼‰å…¥æ‹–æ‹½ç³»çµ±...</h3>
        <p>è«‹ç¨å€™ï¼Œç³»çµ±æ­£åœ¨åˆå§‹åŒ–æ‰€æœ‰çµ„ä»¶</p>
      </div>
    </div>

    <!-- åŠŸèƒ½èªªæ˜ -->
    <div class="features-grid">
      <div class="feature-card">
        <h3>ğŸ¯ æ‹–æ‹½åŠŸèƒ½</h3>
        <p>æ”¯æ´å°‡å­—æ¯ç£šå¾æ‰‹ç‰Œæ‹–æ‹½åˆ°æ£‹ç›¤ï¼Œæˆ–åœ¨æ£‹ç›¤ä¸Šé‡æ–°æ’åˆ—ã€‚åŒ…å«è¦–è¦ºåé¥‹å’Œå‹•ç•«æ•ˆæœã€‚</p>
      </div>
      
      <div class="feature-card">
        <h3>ğŸ“± è§¸æ§æ”¯æ´</h3>
        <p>å®Œæ•´çš„æ‰‹æ©Ÿå’Œå¹³æ¿è§¸æ§æ”¯æ´ï¼ŒåŒ…æ‹¬è§¸æ§æ‹–æ‹½ã€ç¸®æ”¾é©æ‡‰å’Œè§¸æ§åé¥‹ã€‚</p>
      </div>
      
      <div class="feature-card">
        <h3>ğŸ æ™ºèƒ½æ£‹ç›¤</h3>
        <p>15x15 æ£‹ç›¤æ ¼å­ï¼Œè‡ªå‹•æª¢æ¸¬å–®è©å½¢æˆï¼ŒåŒ…å«åˆæ³•æ€§é©—è­‰å’Œåˆ†æ•¸è¨ˆç®—ã€‚</p>
      </div>
      
      <div class="feature-card">
        <h3>â­ è¬ç”¨å­—æ¯</h3>
        <p>æ”¯æ´è¬ç”¨å­—æ¯ç£šè¨­ç½®ï¼Œé›™æ“Šé¸æ“‡å­—æ¯ï¼ŒåŒ…å«è¦–è¦ºæŒ‡ç¤ºå™¨å’Œç‹€æ…‹ç®¡ç†ã€‚</p>
      </div>
      
      <div class="feature-card">
        <h3>ğŸ¨ ç¾ä»£UI</h3>
        <p>æ¼¸å±¤èƒŒæ™¯ã€æ¯›ç»ç’ƒæ•ˆæœã€æµæš¢å‹•ç•«å’ŒéŸ¿æ‡‰å¼è¨­è¨ˆï¼Œæä¾›å„ªè³ªçš„ç”¨æˆ¶é«”é©—ã€‚</p>
      </div>
      
      <div class="feature-card">
        <h3>ğŸ› ï¸ èª¿è©¦å·¥å…·</h3>
        <p>å…§å»ºèª¿è©¦é¢æ¿ã€æ€§èƒ½ç›£æ§ã€è‡ªå‹•ä¿å­˜å’Œéµç›¤å¿«æ·éµï¼Œä¾¿æ–¼é–‹ç™¼å’Œæ¸¬è©¦ã€‚</p>
      </div>
    </div>
  </div>

  <!-- è¼‰å…¥è…³æœ¬ -->
  <script>
    // è¼‰å…¥ç‹€æ…‹ç®¡ç†
    let systemsLoaded = {
      dragDrop: false,
      board: false,
      ui: false
    };

    // æª¢æ¸¬è¨­å‚™é¡å‹
    function detectDevice() {
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      const isTablet = /(iPad|Android.*Mobile)/i.test(navigator.userAgent);
      const hasTouch = 'ontouchstart' in window;
      
      document.getElementById('device-type').textContent = 
        `è¨­å‚™: ${isMobile ? 'æ‰‹æ©Ÿ' : isTablet ? 'å¹³æ¿' : 'æ¡Œé¢'}${hasTouch ? ' (è§¸æ§)' : ''}`;
      
      // æ›´æ–°è§¸æ§æ”¯æ´ç‹€æ…‹
      const touchStatus = document.getElementById('touch-status');
      if (hasTouch) {
        touchStatus.classList.add('active');
      }
    }

    // æ›´æ–°ç³»çµ±ç‹€æ…‹
    function updateSystemStatus() {
      const dragStatus = document.getElementById('drag-status');
      const boardStatus = document.getElementById('board-status');
      
      if (typeof DragDropManager !== 'undefined') {
        systemsLoaded.dragDrop = true;
        dragStatus.classList.add('active');
      }
      
      if (typeof GameBoard !== 'undefined') {
        systemsLoaded.board = true;
        boardStatus.classList.add('active');
      }
    }

    // å•Ÿå‹•æ¼”ç¤ºéŠæˆ²
    function startDemoGame() {
      console.log('ğŸš€ å•Ÿå‹•æ¼”ç¤ºéŠæˆ²');
      
      // æª¢æŸ¥ç³»çµ±æ˜¯å¦å·²è¼‰å…¥
      if (!systemsLoaded.dragDrop || !systemsLoaded.board) {
        alert('âš ï¸ ç³»çµ±å°šæœªå®Œå…¨è¼‰å…¥ï¼Œè«‹ç¨å¾Œå†è©¦');
        return;
      }
      
      // æ¨¡æ“¬éŠæˆ²æ•¸æ“š
      const mockGameData = {
        currentPlayerName: 'æ¼”ç¤ºç©å®¶',
        round: 1,
        players: [
          { name: 'æ¼”ç¤ºç©å®¶', id: 'demo-player' },
          { name: 'AIå°æ‰‹1', id: 'ai-1' },
          { name: 'AIå°æ‰‹2', id: 'ai-2' }
        ],
        currentPlayer: 0
      };
      
      // å•Ÿå‹•å¢å¼·ç‰ˆç•Œé¢
      if (typeof window.startGameInterface === 'function') {
        window.startGameInterface(mockGameData);
      } else {
        console.error('âŒ éŠæˆ²ç•Œé¢å‡½æ•¸æœªè¼‰å…¥');
      }
    }

    // è¼‰å…¥æ¸¬è©¦æ•¸æ“š
    function loadTestData() {
      if (typeof window.loadMockData === 'function') {
        window.loadMockData();
      } else {
        alert('ğŸ² è«‹å…ˆå•Ÿå‹•æ¼”ç¤ºéŠæˆ²');
      }
    }

    // åˆ‡æ›èª¿è©¦æ¨¡å¼
    function toggleDebugMode() {
      if (typeof window.toggleDebugPanel === 'function') {
        window.toggleDebugPanel();
      } else {
        alert('ğŸ› ï¸ èª¿è©¦åŠŸèƒ½éœ€è¦å…ˆå•Ÿå‹•æ¼”ç¤º');
      }
    }

    // é‡ç½®æ¼”ç¤º
    function resetDemo() {
      if (confirm('ç¢ºå®šè¦é‡ç½®æ¼”ç¤ºå—ï¼Ÿé€™å°‡æ¸…é™¤æ‰€æœ‰æ•¸æ“šã€‚')) {
        location.reload();
      }
    }

    // é é¢è¼‰å…¥å®Œæˆå¾Œçš„åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ“„ æ¼”ç¤ºé é¢è¼‰å…¥å®Œæˆ');
      
      detectDevice();
      
      // å®šæœŸæª¢æŸ¥ç³»çµ±ç‹€æ…‹
      const statusChecker = setInterval(() => {
        updateSystemStatus();
        
        // å¦‚æœæ‰€æœ‰ç³»çµ±éƒ½è¼‰å…¥å®Œæˆï¼Œåœæ­¢æª¢æŸ¥
        if (Object.values(systemsLoaded).every(loaded => loaded)) {
          clearInterval(statusChecker);
          console.log('âœ… æ‰€æœ‰ç³»çµ±çµ„ä»¶è¼‰å…¥å®Œæˆ');
          
          // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
          const gameArea = document.getElementById('game-area');
          if (gameArea.querySelector('.loading-message')) {
            gameArea.innerHTML = `
              <div class="loading-message">
                <h3 style="color: #28a745;">âœ… æ‹–æ‹½ç³»çµ±è¼‰å…¥å®Œæˆï¼</h3>
                <p>é»æ“Šä¸Šæ–¹çš„ "ğŸš€ å•Ÿå‹•æ¼”ç¤º" æŒ‰éˆ•é–‹å§‹é«”é©—</p>
                <div style="margin-top: 20px; font-size: 14px; color: #666;">
                  <p><strong>æ“ä½œæç¤ºï¼š</strong></p>
                  <p>â€¢ æ‹–æ‹½å­—æ¯ç£šåˆ°æ£‹ç›¤çµ„æˆå–®è©</p>
                  <p>â€¢ é›™æ“Šè¬ç”¨å­—æ¯ç£š(â˜…)è¨­ç½®å­—æ¯</p>
                  <p>â€¢ æŒ‰ Ctrl+Shift+D é–‹å•Ÿèª¿è©¦é¢æ¿</p>
                  <p>â€¢ æ”¯æ´æ‰‹æ©Ÿè§¸æ§æ‹–æ‹½æ“ä½œ</p>
                </div>
              </div>
            `;
          }
        }
      }, 500);
      
      // 10ç§’å¾Œå¦‚æœé‚„æ²’è¼‰å…¥å®Œæˆï¼Œé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
      setTimeout(() => {
        if (!Object.values(systemsLoaded).every(loaded => loaded)) {
          console.warn('âš ï¸ æŸäº›ç³»çµ±çµ„ä»¶è¼‰å…¥è¶…æ™‚');
          const gameArea = document.getElementById('game-area');
          gameArea.innerHTML = `
            <div class="loading-message">
              <h3 style="color: #dc3545;">âš ï¸ ç³»çµ±è¼‰å…¥è¶…æ™‚</h3>
              <p>è«‹æª¢æŸ¥ç¶²çµ¡é€£æ¥æˆ–é‡æ–°è¼‰å…¥é é¢</p>
              <button class="demo-btn" onclick="location.reload()">ğŸ”„ é‡æ–°è¼‰å…¥</button>
            </div>
          `;
        }
      }, 10000);
    });

    // éŒ¯èª¤è™•ç†
    window.addEventListener('error', function(e) {
      console.error('âŒ é é¢éŒ¯èª¤:', e.error);
    });

    // æä¾›å…¨å±€èª¿è©¦å‡½æ•¸
    window.demoDebug = {
      checkSystems: () => {
        console.log('ğŸ” ç³»çµ±ç‹€æ…‹æª¢æŸ¥:');
        console.log('DragDropManager:', typeof DragDropManager !== 'undefined');
        console.log('GameBoard:', typeof GameBoard !== 'undefined');
        console.log('EnhancedTileUIManager:', typeof EnhancedTileUIManager !== 'undefined');
        console.log('enhancedTileUI:', typeof enhancedTileUI !== 'undefined');
      },
      getGameState: () => {
        if (typeof enhancedTileUI !== 'undefined' && enhancedTileUI) {
          return enhancedTileUI.getGameState();
        }
        return null;
      }
    };

    console.log('ğŸ® æ¼”ç¤ºé é¢è…³æœ¬è¼‰å…¥å®Œæˆ');
    console.log('ğŸ’¡ ä½¿ç”¨ window.demoDebug é€²è¡Œç³»çµ±èª¿è©¦');
  </script>

  <!-- é€™è£¡éœ€è¦è¼‰å…¥ä½ çš„æ‹–æ‹½ç³»çµ±è…³æœ¬ -->
  <!-- 
  <script src="drag-drop-system.js"></script>
  <script src="game-board.js"></script>
  <script src="enhanced-tile-ui.js"></script>
  <script src="drag-drop-integration.js"></script>
  -->

  <!-- æ¨¡æ“¬è…³æœ¬è¼‰å…¥ï¼ˆå¯¦éš›ä½¿ç”¨æ™‚è«‹æ›¿æ›ç‚ºçœŸå¯¦çš„è…³æœ¬è·¯å¾‘ï¼‰ -->
  <script>
    // æ¨¡æ“¬è…³æœ¬è¼‰å…¥å»¶é²
    setTimeout(() => {
      console.log('ğŸ“¦ æ¨¡æ“¬æ‹–æ‹½ç³»çµ±è…³æœ¬è¼‰å…¥...');
      // é€™è£¡æœƒè¼‰å…¥å¯¦éš›çš„æ‹–æ‹½ç³»çµ±
      
      // æ¨¡æ“¬é¡åˆ¥å®šç¾©ï¼ˆå¯¦éš›ä¸­æœƒå¾è…³æœ¬æ–‡ä»¶è¼‰å…¥ï¼‰
      window.DragDropManager = class {
        constructor() {
          console.log('ğŸ¯ DragDropManager æ¨¡æ“¬è¼‰å…¥');
        }
      };
      
      window.GameBoard = class {
        constructor() {
          console.log('ğŸ GameBoard æ¨¡æ“¬è¼‰å…¥');
        }
      };
      
      window.EnhancedTileUIManager = class {
        constructor() {
          console.log('âœ¨ EnhancedTileUIManager æ¨¡æ“¬è¼‰å…¥');
        }
      };
      
      console.log('âœ… æ‰€æœ‰æ‹–æ‹½ç³»çµ±çµ„ä»¶æ¨¡æ“¬è¼‰å…¥å®Œæˆ');
    }, 2000);
  </script>
</body>
</html>